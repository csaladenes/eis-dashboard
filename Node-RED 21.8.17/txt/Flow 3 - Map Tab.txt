[{"id":"75b6709b.e7456","type":"comment","z":"431d8edb.f9be4","name":"Map Tab","info":"","x":66,"y":24,"wires":[]},{"id":"949a2dcd.c6726","type":"ui_template","z":"431d8edb.f9be4","group":"c7d34a9e.84a058","name":"Map","order":0,"width":"0","height":"0","format":"<script src='https://api.mapbox.com/mapbox-gl-js/v0.39.1/mapbox-gl.js'></script>\n<link href='https://api.mapbox.com/mapbox-gl-js/v0.39.1/mapbox-gl.css' rel='stylesheet' />\n\n<div id='map' style='width: 1250px; height: 600px;'></div>\n<script>\nmapboxgl.accessToken = 'pk.eyJ1Ijoicm9zc25ld2J5IiwiYSI6ImNqNXd0dnV4cjBld2QzM21lcGJwenJucXkifQ.hm28cCDEptGKwcjwnIjXlA';\nvar map = new mapboxgl.Map({\n    container: 'map',\n    //interactive: false,\n    style: 'mapbox://styles/mapbox/light-v9',\n    center: [-2.784, 54.010],\n    maxBounds: [[-2.808, 54], [-2.759, 54.015]],\n    zoom: 14.5,\n    maxZoom: 17,\n    bearing: 90\n});\n\nmap.on('click', function(e) {\n  var features = map.queryRenderedFeatures(e.point, {\n    layers: ['{layer-name}'] // replace this with the name of the layer\n  });\n\n  if (!features.length) {\n    return;\n  }\n\n  var feature = features[0];\n\n  var popup = new mapboxgl.Popup({ offset: [0, -15] })\n    .setLngLat(feature.geometry.coordinates)\n    .setHTML('<h3>' + feature.properties.title + '</h3><p>' + feature.properties.description + '</p>')\n    .setLngLat(feature.geometry.coordinates)\n    .addTo(map);\n});\n\nmap.on('load', function() {\n    map.loadImage('https://cdn3.iconfinder.com/data/icons/picons-weather/57/53_warning-512.png', function(error, image) {\n        if (error) throw error;\n        map.addImage('warning', image);\n        map.addLayer({\n            \"id\": \"points\",\n            \"type\": \"symbol\",\n            \"source\": {\n                \"type\": \"geojson\",\n                \"data\": {\n                    \"type\": \"FeatureCollection\",\n                    \"features\": [{\n                        \"type\": \"Feature\",\n                        \"geometry\": {\n                            \"type\": \"Point\",\n                            \"coordinates\": [-2.784, 54.010]\n                        }\n                    }]\n                }\n            },\n            \"layout\": {\n                \"icon-image\": \"warning\",\n                \"icon-size\": 0.1\n            },\n        });\n    });\n});\n\nmap.on('click', function(e) {\n  var features = map.queryRenderedFeatures(e.point, {\n    layers: ['points'] // get layer with error icons\n  });\n\n  if (!features.length) {\n    return;\n  }\n\n  var feature = features[0];\n\n  var popup = new mapboxgl.Popup({ offset: [0, -15] })\n    .setLngLat(feature.geometry.coordinates)\n    .setHTML('<h3>Title:</h3><p>Graphs / information displayed.</p>')\n    .setLngLat(feature.geometry.coordinates)\n    .addTo(map);\n});\n\n</script>\n\n","storeOutMessages":false,"fwdInMessages":true,"templateScope":"local","x":124,"y":81,"wires":[[]]},{"id":"c7d34a9e.84a058","type":"ui_group","z":"","name":"Map","tab":"3206ace3.767194","order":2,"disp":false,"width":"24"},{"id":"3206ace3.767194","type":"ui_tab","z":"","name":"Map","icon":"map","order":3}]